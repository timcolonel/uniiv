<div class="content_box pagewidth_twothirds">
  <div><h1>Course Log</h1></div>
  
  <hr style="width:100%">
  
  <% courses = Course::Course.all.to_a %>
  <% current_user.taking_courses.each do |tc| %>
    <% courses.delete(tc.course) %>
  <% end %>
  <% current_user.completed_courses.each do |cc| %>
    <% courses.delete(cc.course) %>
  <% end %>
  <% courses.sort_by!{ |m| m.to_s } %>
  <% courses = courses.map{|x| [x, x.id]} %>
  
  <%= form_tag(:action => "addCourse", :method => "post") do %>
    <%= select_tag 'course', options_for_select(courses)  , { :class => "form_input_long middle form_biginput" } %>
    <div class="center"><%= submit_tag 'In Progress', :style => "width:80px;" %>
    <%= submit_tag 'Completed', :name => 'completed', :style => "width:80px;" %></div>
  <% end %>
  
  <hr style="width:100%">
  
  <div><h3>Courses in progress</h3></div>  
  <% current_user.taking_courses.each do |c| %>
    <div>
      <h4><%= c.course.subject.name + " " + c.course.code.to_s %></h4>
      <button style="visibility:hidden;">I</button>
      <div style="float:right;">
        <%= form_tag(:action => "removeCourseTaking", 'data-service' => c) do %>
          <%= submit_tag("Remove") %>
        <% end %>
      </div>
    </div>
  <% end %>
  <% if current_user.taking_courses.empty? %>
    <div><h4>You are not taking any courses.</h4></div>
  <% end %>
  
  <hr style="width:100%">
  
  <div><h3>Courses completed</h3></div>
  <% current_user.completed_courses.each do |c| %>
    <div>
      <h4><%= c.course.subject.name + " " + c.course.code.to_s %></h4>
      <button style="visibility:hidden;">I</button>
      <div style="float:right;">
        <%= form_tag(:action => "removeCourseCompleted", 'data-service' => c) do %>
          <%= submit_tag("Remove") %>
        <% end %>
      </div>
    </div>
  <% end %>
  <% if current_user.completed_courses.empty? %>
    <div><h4>You have not completed any courses.</h4></div>
  <% end %>
</div>  